%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  Latex Shortcuts and Redefinitions
%%
%%  Original by Jonathan Huggins, with thanks to Dan Roy and Ryan Adams for allowing the use many of their definitions.
%%
%%  Adapted by Trevor Campbell for personal use.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\usepackage{xifthen}
\usepackage{xspace} %used at the end of macros to automatically determine whether spaces should be eaten or not
\usepackage[mathscr]{eucal} %use euler script instead of mathcal
\usepackage{dsfont} %doublestroke fonts (for things like reals, nats, complex numbers, etc)
\usepackage[nice]{nicefrac} %nice fraction typesetting, compact symbols for 1/2, etc
\usepackage[usenames]{color} %for using colored text
\usepackage{hyperref} %typical linking package
\usepackage{amsmath,amssymb,amsthm,bm,bbm,amsfonts,mathtools} %math
\usepackage[capitalize,sort,compress]{cleveref} %nice reference package for automatically choosing names for references
\DeclareMathAlphabet{\mathpzc}{OT1}{pzc}{m}{it}
\usepackage{import, subfiles} %packages for using subfile/folder structure
\usepackage{url} %nice URL typesetting
\usepackage{algpseudocode, algorithm} %typical alg typesetting packages
\usepackage{graphicx} %typical graphics package for figures
\usepackage{multirow} %multirow tables
\usepackage{wrapfig} %figures wrapped into the text
\usepackage{caption,subcaption} %package for sub-environments (figs, tables, etc)
\usepackage{microtype} %microtypesetting improvements for latex
\usepackage{booktabs} %professional quality tables

\usepackage{xargs}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Package Options Declarations %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%hyperref format/color/etc
\DeclareOption{tchypersetup}{\hypersetup{colorlinks=true, allcolors=SubtleColor, pdfborder={0 0 0}}}
\DeclareOption{blackhypersetup}{\hypersetup{colorlinks=false, allcolors=black, pdfborder={0 0 0}}}
\def\boldorbar{\bar}
\DeclareOption{bbold}{\def\boldorbar{\bm}}
\DeclareOption{bbar}{\def\boldorbar{\bar}}
%autonum
\newif\ifuseautonum
\useautonumfalse
\DeclareOption{autonum}{\useautonumtrue}

\ProcessOptions

\ifuseautonum \usepackage{autonum} \fi


%%%%%%%%%%%%%%%%%%
%%% Commenting %%%
%%%%%%%%%%%%%%%%%%

%% NA: needs attention (rough writing whose correctness needs to be verified)
%% TBD: instructions for how to fix a gap ("Describe the propagation by ...")
%% PROBLEM: bug or missing crucial bit

%% use \fXXX versions of these macros to put additional explanation into a footnote (in the margin).
%% The idea is that we don't want to interrupt the flow of the paper or make it
%% impossible to read because there are a bunch of comments.

%% NA's (and TBDs, those less crucially) should be written so
%% that they flow with the text.

\definecolor{WowColor}{rgb}{.75,0,.75}
\definecolor{SubtleColor}{rgb}{0,0,.50}

% inline
\newcommand{\NA}[1]{\textcolor{SubtleColor}{ {\tiny \bf ($\star$)} #1}}
\newcommand{\LATER}[1]{\textcolor{SubtleColor}{ {\tiny \bf ($\dagger$)} #1}}
\newcommand{\TBD}[1]{\textcolor{SubtleColor}{ {\tiny \bf (!)} #1}}
\newcommand{\PROBLEM}[1]{\textcolor{WowColor}{ {\bf (!!)} {\bf #1}}}

% as margin notes
\newcounter{margincounter}
\newcommand{\displaycounter}{{\arabic{margincounter}}}
\newcommand{\incdisplaycounter}{{\stepcounter{margincounter}\arabic{margincounter}}}

\newcommand{\fTBD}[1]{\textcolor{SubtleColor}{$\,^{(\incdisplaycounter)}$}\marginpar{\tiny\textcolor{SubtleColor}{ {\tiny $(\displaycounter)$} #1}}}

\newcommand{\fPROBLEM}[1]{\textcolor{WowColor}{$\,^{((\incdisplaycounter))}$}\marginpar{\tiny\textcolor{WowColor}{ {\bf $\mathbf{((\displaycounter))}$} {\bf #1}}}}

\newcommand{\fLATER}[1]{\textcolor{SubtleColor}{$\,^{(\incdisplaycounter\dagger)}$}\marginpar{\tiny\textcolor{SubtleColor}{ {\tiny $(\displaycounter\dagger)$} #1}}}

\DeclareRobustCommand{\suppresscomments}{
% For submission, make all render blank.
\renewcommand{\LATER}[1]{}
\renewcommand{\fLATER}[1]{}
\renewcommand{\TBD}[1]{}
\renewcommand{\fTBD}[1]{}
\renewcommand{\PROBLEM}[1]{}
\renewcommand{\fPROBLEM}[1]{}
\renewcommand{\NA}[1]{##1}  %% Note, NA's pass through!
}

% shorten paper -- the higher shortenval, the shorter the paper
\newcommand{\setshortness}[1]{\def\shortnessval{#1}}
\setshortness{0}
\newcommand{\condcomment}[2][1]{\ifnum#1>\shortnessval #2\fi}

%%%%%%%%%%%%%
%%% Links %%%
%%%%%%%%%%%%%
\renewcommand*{\UrlFont}{\ttfamily\scriptsize\relax}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Shortened \left/\right commands %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\def\pp({\left(}
\def\pp){\right)}
\def\pp[{\left[}
\def\pp]{\right]}
\def\cppl{\left\{}
\def\cppr{\right\}}




%%%%%%%%%%%%%%%%%%%%%%%
%%% Align shortcuts %%%
%%%%%%%%%%%%%%%%%%%%%%%
\AtBeginDocument{ %necessary to stop clash with autonum package
\def\[#1\]{\begin{align}#1\end{align}}		% numbered
\def \<#1\>{\begin{aligned}#1\end{aligned}}
\def\(#1\){\begin{align*}#1\end{align*}} 	% unnumbered
}


%%%%%%%%%%%%%%%%%%%%%%
%%% Important Sets %%%
%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\reals}{\ensuremath{\mathbb{R}}}
\newcommand{\ints}{\ensuremath{\mathbb{Z}}}
\newcommand{\rats}{\ensuremath{\mathbb{Q}}}
\newcommand{\nats}{\ensuremath{\mathbb{N}}}
\newcommand{\comps}{\ensuremath{\mathbb{C}}}


%%%%%%%%%%%%%%%
%%% Vectors %%%
%%%%%%%%%%%%%%%
\newcommand{\bone}{\mathbf{1}}
\newcommand{\bzero}{\mathbf{0}}
\newcommand{\bell}{\mathbf{\ell}}


%%%%%%%%%%%%%%%%%%%%%%%%
%%% Matrix Operators %%%
%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\diag}{\operatorname{diag}}
\newcommand{\tr}{\operatorname{tr}}
\newcommand{\kron}{\operatorname{\otimes}}


%%%%%%%%%%%%%%%%%%%%%%%
%%% General Purpose %%%
%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\tuple}[1][]{\left\langle #1 \right\rangle}
\newcommand{\emptystr}{\text{\o}}
\newcommand{\ind}{\mathds{1}} % indicator function
\newcommand{\sgn}{\operatorname{sgn}} % sign function
\newcommand{\theset}[1]{\lbrace #1 \rbrace}
\newcommand{\sn}[2]{\ensuremath{#1\!\times\!10^{#2}}}	% #1 x 10^{#2}

\newcommand{\st}{\,:\,}
\newcommand{\given}{\,|\,}
\newcommand{\closure}{\operatorname{cl}}
\newcommand{\spann}{\operatorname{span}}
\newcommand{\diam}{\operatorname{diam}}


% New definition of square root:
% it renames \sqrt as \oldsqrt
\let\oldsqrt\sqrt
% it defines the new \sqrt in terms of the old one
\def\sqrt{\mathpalette\DHLhksqrt}
\def\DHLhksqrt#1#2{%
\setbox0=\hbox{$#1\oldsqrt{#2\,}$}\dimen0=\ht0
\advance\dimen0-0.2\ht0
\setbox2=\hbox{\vrule height\ht0 depth -\dimen0}%
{\box0\lower0.4pt\box2}}

% min and max
\def\argmax{\operatornamewithlimits{arg\,max}}
\def\argmin{\operatornamewithlimits{arg\,min}}
\def\esssup{\operatornamewithlimits{ess\,sup}}
\def\essinf{\operatornamewithlimits{ess\,inf}}

% Equality operators
\mathtoolsset{centercolon}
%\newcommand{\defined}{\ensuremath{\triangleq}}
\newcommand{\defined}{:=}
\newcommand{\defines}{=:}
\newcommand{\xapprox}[1]{\underset{#1}{\approx}}
\newcommand{\medeq}{\!=\!}
\newcommand{\shorteq}{\!\!=\!\!}

% Other binary operators
\newcommand{\sm}{\!-\!}
\newcommand{\splus}{\!+\!}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Optimization               %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\prox}[2]{\ensuremath{\operatorname{prox}_{#1}\left(#2\right)}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Convex Analysis %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\DeclareMathOperator{\cone}{cone}
\DeclareMathOperator{\conv}{conv}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Algorithms %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%properly indented comments
%usage:
%\LineComment{X}{Here is the comment},  where X = # additional indents. 
%right after for / procedure / function calls, for whatever reason need to indent manually...
\newdimen{\algindent}
\setlength\algindent{1.5em}
\makeatletter
\newcommand{\LineComment}[2][0]{\Statex \hspace{#1\algindent} \hskip\ALG@thistlm $\triangleright$ #2}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Probability and Statistics %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% text shortcuts
\newcommand{\iid}{\textrm{i.i.d.}\@\xspace}
\newcommand{\as}{\textrm{a.s.}\@\xspace}
\newcommand{\aev}{\textrm{a.e.}\@\xspace}

% convergence
\newcommand{\convas}{\overset{a.s.}{\to}}
\newcommand{\convp}{\overset{p}{\to}}
\newcommand{\convd}{\overset{d}{\to}}
\newcommand{\eqd}{\overset{d}{=}}
\newcommand{\eqas}{\overset{a.s.}{=}}

% unary/functions
\renewcommand{\Pr}{\mathbb{P}}  % probability
\newcommand{\EE}{\mathbb{E}}	% expectation

\newcommand{\var}{\operatorname{Var}}	% variance
\newcommand{\cov}{\operatorname{Cov}}	% covariance
\newcommand{\corr}{\operatorname{Corr}}	% correlation
\newcommand{\supp}{\operatorname{supp}} %support

% binary operators
\newcommand{\dist}{\sim}
\newcommand{\distiid}{\overset{\textrm{\tiny\iid}}{\dist}}
\newcommand{\distind}{\overset{\textrm{\tiny\textrm{indep}}}{\dist}}

\def\independenT#1#2{\mathrel{\rlap{$#1#2$}\mkern4mu{#1#2}}}
\newcommand\indep{\protect\mathpalette{\protect\independenT}{\perp}} % independent

% parametric distributions
\newcommand{\distNamed}[1]{{\sf{#1}}}
\newcommand{\distNorm}{\mathcal{N}}
\newcommand{\distT}{\mathcal{T}}
\newcommand{\distLaplace}{\distNamed{Lap}}
\newcommand{\distChiSq}{\chi^2}
%\newcommand{\distUnif}{\mathscr{U}}
\newcommand{\distUnif}{\distNamed{Unif}}
%\newcommand{\distGam}{\mathscr{G}{\scriptstyle\mathscr{A}}}
\newcommand{\distGam}{\distNamed{Gam}}
\newcommand{\distGumbel}{\distNamed{Gumbel}}
\newcommand{\distGEV}{\distNamed{GEV}}
\newcommand{\distCat}{\distNamed{Categorical}}
\newcommand{\distInvGam}{\distNamed{InvGam}}
%\newcommand{\distPoiss}{\mathscr{P}{\scriptstyle\mathscr{O}}}
\newcommand{\distPoiss}{\distNamed{Poiss}}
\newcommand{\distExp}{\distNamed{Exp}}
\newcommand{\distBeta}{\distNamed{Beta}}
\newcommand{\distBetaPrime}{\distNamed{Beta}'}
\newcommand{\distDir}{\distNamed{Dir}}
\newcommand{\distBinom}{\distNamed{Binom}}
\newcommand{\distMulti}{\distNamed{Multi}}
\newcommand{\distBern}{\distNamed{Bern}}
\newcommand{\distGeom}{\distNamed{Geom}}
\newcommand{\distWish}{\mathpzc{W}}
\newcommand{\distInvWish}{\mathpzc{IW}}
% non-parametric distribution
\newcommand{\distBeP}{\mathrm{BeP}}
\newcommand{\distDP}{\mathrm{DP}}
\newcommand{\distCRP}{\mathrm{CRP}}
\newcommand{\distPYP}{\mathrm{PY}}
\newcommand{\distGP}{{\mathrm{GP}}} % Gaussian process
\newcommand{\distPP}{\mathrm{PP}}
\newcommand{\distBP}{\mathrm{BP}}
\newcommand{\distBPP}{\mathrm{BPP}}
\newcommand{\distGammaP}{\mathrm{\Gamma P}}
\newcommand{\distNGammaP}{\mathrm{N\Gamma P}}
\newcommand{\distLP}{\mathrm{LP}}
\newcommand{\distObs}{\mathrm{Obs}}
\newcommand{\distCRM}{\mathrm{CRM}}
\newcommand{\distNCRM}{\mathrm{NCRM}}
\newcommand{\distVMF}{\mathrm{vMF}}


%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Information Theory %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\divergence}[4][]{\mathrm{D^{\ifthenelse{\isempty{#1}}{}{#1}}_{#2}}\left(#3 || #4\right)}
\newcommand{\distance}[4][]{\mathrm{D^{\ifthenelse{\isempty{#1}}{}{#1}}_{#2}}\left(#3, #4\right)}
\newcommand{\kl}[3][]{\divergence[#1]{KL}{#2}{#3}}
\newcommand{\tvd}[3][]{\distance[#1]{TV}{#2}{#3}}
\newcommand{\ent}[1]{\mathcal{H}\left(#1\right)}
\newcommand{\hell}[3][]{\distance[#1]{H}{#2}{#3}}

%%%%%%%%%%%%%%%%%%%%%
%%% Special Funcs %%%
%%%%%%%%%%%%%%%%%%%%%
\newcommand*\pFq[2]{{}_{#1}F_{#2}}

%%%%%%%%%%%%%%%%
%%% Calculus %%%
%%%%%%%%%%%%%%%%
\newcommand{\dee}{\mathrm{d}}
\newcommand{\grad}{\nabla}

\newcommand{\der}[2]{\ensuremath{\frac{\dee #1}{\dee #2}}}
\newcommand{\dder}[2]{\ensuremath{\frac{d^2 #1}{d #2^2}}}
\newcommand{\D}[2]{\ensuremath{\frac{\partial #1}{\partial #2}}}
\newcommand{\DD}[2]{\ensuremath{\frac{\partial^2 #1}{\partial #2^2}}}
\newcommand{\Di}[2]{\ensuremath{\frac{\partial^i #1}{\partial #2^i}}}
\newcommand{\prt}[1]{\ensuremath{\frac{\partial}{\partial #1}}}
\newcommand{\hes}[2]{\ensuremath{\frac{\partial^2}{\partial #1 \partial #2}}}


%%%%%%%%%%%%%
%%% Logic %%%
%%%%%%%%%%%%%
\DeclareMathOperator{\notimplies}{\centernot\implies}


%%%%%%%%%%%%%%%%%
%%% Fractions %%%
%%%%%%%%%%%%%%%%%
\newcommand{\half}{\ensuremath{\nicefrac{1}{2}}\xspace}
\newcommand{\third}{\ensuremath{\nicefrac{1}{3}}\xspace}
\newcommand{\quarter}{\ensuremath{\nicefrac{1}{4}}\xspace}


%%%%%%%%%%%%%%%%%
%%% Shortcuts %%%
%%%%%%%%%%%%%%%%%
\newcommand{\eps}{\epsilon}
\newcommand{\veps}{\varepsilon}
\newcommand{\bmat}{\begin{pmatrix}}
\newcommand{\emat}{\end{pmatrix}}
\newcommand{\bitems}{\begin{itemize}}
\newcommand{\eitems}{\end{itemize}}
\newcommand{\benum}{\begin{enumerate}}
\newcommand{\eenum}{\end{enumerate}}
\newcommand{\bdesc}{\begin{description}}
\newcommand{\edesc}{\end{description}}
\newcommand{\angles}[1]{\langle #1 \rangle}
\newcommand{\ip}[2]{\angles{#1, #2}}


%%%%%%%%%%%%%%
%%% Proofs %%%
%%%%%%%%%%%%%%
\newcommand{\bprf}{\begin{proof}}
\newcommand{\eprf}{\end{proof}}
\newenvironment{proofof}[1]{\renewcommand{\proofname}{Proof of #1}\proof}{\endproof}
\newcommand{\bprfof}{\begin{proofof}}
\newcommand{\eprfof}{\end{proofof}}


% Proof definitions
\theoremstyle{plain}
\newtheorem{nthm}{Theorem}
\newtheorem{nprop}[nthm]{Proposition}
\newtheorem{nlem}[nthm]{Lemma}
\newtheorem{ncor}[nthm]{Corollary}
\newtheorem{nconj}[nthm]{Conjecture}
\newtheorem*{thm}{Theorem}
\newtheorem*{stmt}{Statement}
\newtheorem*{prop}{Proposition}
\newtheorem*{lem}{Lemma}
\newtheorem*{cor}{Corollary}
\newtheorem*{conj}{Conjecture}

\theoremstyle{definition}
\newtheorem{ndefn}[nthm]{Definition}
\newtheorem{nexa}[nthm]{Example}
\newtheorem{nexer}[nthm]{Exercise}
\newtheorem{nassum}[nthm]{Assumption}
\newtheorem*{defn}{Definition}
\newtheorem*{exa}{Example}
\newtheorem*{exer}{Exercise}
\newtheorem*{cond}{Condition}
\newtheorem*{assum}{Assumption}

\theoremstyle{remark}
\newtheorem{nrmk}{Remark}
\newtheorem*{rmk}{Remark}
\newtheorem*{mynote}{Note}

% Proof shortcuts
\newcommand{\bthm}{\begin{thm}}
\newcommand{\ethm}{\end{thm}}
\newcommand{\bnthm}{\begin{nthm}}
\newcommand{\enthm}{\end{nthm}}

\newcommand{\bnprop}{\begin{nprop}}
\newcommand{\enprop}{\end{nprop}}
\newcommand{\bprop}{\begin{prop}}
\newcommand{\eprop}{\end{prop}}

\newcommand{\bnlem}{\begin{nlem}}
\newcommand{\enlem}{\end{nlem}}
\newcommand{\blem}{\begin{lem}}
\newcommand{\elem}{\end{lem}}

\newcommand{\bncor}{\begin{ncor}}
\newcommand{\encor}{\end{ncor}}
\newcommand{\bcor}{\begin{cor}}
\newcommand{\ecor}{\end{cor}}

\newcommand{\bnconj}{\begin{nconj}}
\newcommand{\enconj}{\end{nconj}}
\newcommand{\bconj}{\begin{conj}}
\newcommand{\econj}{\end{conj}}

\newcommand{\bnumdefn}{\begin{ndefn}}
\newcommand{\enumdefn}{\end{ndefn}}
\newcommand{\bdefn}{\begin{defn}}
\newcommand{\edefn}{\end{defn}}

\newcommand{\bnexa}{\begin{nexa}}
\newcommand{\enexa}{\end{nexa}}
\newcommand{\bexa}{\begin{exa}}
\newcommand{\eexa}{\end{exa}}

\newcommand{\bnexer}{\begin{nexer}}
\newcommand{\enexer}{\end{nexer}}
\newcommand{\bexer}{\begin{exer}}
\newcommand{\eexer}{\end{exer}}

\newcommand{\bnassum}{\begin{nassum}}
\newcommand{\enassum}{\end{nassum}}
\newcommand{\bassum}{\begin{assum}}
\newcommand{\eassum}{\end{assum}}

\newcommand{\bcond}{\begin{cond}}
\newcommand{\econd}{\end{cond}}

\newcommand{\bnrmk}{\begin{nrmk}}
\newcommand{\enrmk}{\end{nrmk}}
\newcommand{\brmk}{\begin{rmk}}
\newcommand{\ermk}{\end{rmk}}
\newcommand{\bnote}{\begin{mynote}}
\newcommand{\enote}{\end{mynote}}

%Proof clever ref names
\crefname{nlem}{Lemma}{Lemmas}
\crefname{nprop}{Proposition}{Propositions}
\crefname{ncor}{Corollary}{Corollaries}
\crefname{nthm}{Theorem}{Theorems}
\crefname{nexa}{Example}{Examples}
\crefname{ndefn}{Definition}{Definitions}
\crefname{nassum}{Assumption}{Assumptions}
\crefformat{footnote}{#1\footnotemark[#2]#3}


%%%%%%%%%%%%%%%%%%%%%%%%
%%% Symbol shortcuts %%%
%%%%%%%%%%%%%%%%%%%%%%%%


\newcommand{\charalphabetmacro}[3]{
% #1: annotation prefix
% #2: annotation command (must be a single command!)
% #3: characters to define annotations for
% Create a macros of the form
%   \newcommand{\#1##1}{#2{##1}} for each ##1 in #3
    \def\mydeffoo##1{\expandafter\def\csname #1##1\endcsname{#2{##1}}}
    \def\mydefallfoo##1{\ifx##1\mydefallfoo\else\mydeffoo##1\expandafter\mydefallfoo\fi}
    \expandafter \mydefallfoo #3\mydefallfoo
}

\newcommand{\texalphabetmacro}[3]{
% #1: annotation prefix
% #2: annotation command (must be a single command!)
% #3: latex symbol command text to define annotations for
% Create a macros of the form
%   \newcommand{\#1##1}{#2{\##1}} for each ##1 in #3
    \def\mydeftex##1{\expandafter\def\csname #1##1\endcsname{#2{\csname ##1\endcsname}}}
    \def\mydefalltex##1{\ifx\mydefalltex##1\else\mydeftex{##1}%
       \lowercase{\mydeftex{##1}}\expandafter\mydefalltex\fi}
    \expandafter \mydefalltex #3\mydefalltex
}

\newcommand{\upperCaseRomanLetters}{ABCDEFGHIJKLMNOPQRSTUVWXYZ}
\newcommand{\lowerCaseRomanLetters}{abcdefghijklmnopqrstuvwxyz}
\newcommand{\lowerCaseRomanLettersNoM}{abcdefghijklnopqrstuvwxyz}
\newcommand{\lowerCaseRomanLettersNoMHT}{abcdefgijklnopqrsuvwxyz}
\newcommand{\lowerCaseRomanLettersNoG}{abcdefhijklmnopqrstuvwxyz}


\newcommand{\lowerCaseGreekLetters}{{alpha}{beta}{gamma}{delta}{epsilon}{zeta}{eta}{theta}{iota}{kappa}{lambda}{mu}{nu}{xi}{omicron}{pi}{rho}{sigma}{tau}{upsilon}{phi}{chi}{psi}{omega}}
\newcommand{\upperCaseGreekLettersInLaTeX}{{Gamma}{Delta}{Theta}{Lambda}{Xi}{Pi}{Sigma}{Upsilon}{Phi}{Psi}{Omega}}

% Bar everything shortcuts
\charalphabetmacro{bar}{\bar}{\upperCaseRomanLetters}
\charalphabetmacro{bar}{\bar}{\lowerCaseRomanLetters}

\charalphabetmacro{b}{\boldorbar}{\upperCaseRomanLetters}
\charalphabetmacro{b}{\boldorbar}{\lowerCaseRomanLettersNoM}

\texalphabetmacro{b}{\boldorbar}{\lowerCaseGreekLetters}
\texalphabetmacro{b}{\boldorbar}{\upperCaseGreekLettersInLaTeX}

% Mathcal shortcuts
\charalphabetmacro{mc}{\mathcal}{\upperCaseRomanLetters}

\newcommand{\hatmathcal}[1]{\hat{\mathcal{#1}}}
\charalphabetmacro{hmc}{\hatmathcal}{\upperCaseRomanLetters}

% Mathfrak shortcuts
\charalphabetmacro{mf}{\mathfrak}{\upperCaseRomanLetters}
\charalphabetmacro{mf}{\mathfrak}{\lowerCaseRomanLetters}


% Bold Mathfrak shortcuts
\newcommand{\boldmathfrak}[1]{\mathbf{\mathfrak{#1}}}
\charalphabetmacro{bmf}{\boldmathfrak}{\upperCaseRomanLetters}
\charalphabetmacro{bmf}{\boldmathfrak}{\lowerCaseRomanLetters}

% Hatted shortcuts
\charalphabetmacro{h}{\hat}{\upperCaseRomanLetters}
\charalphabetmacro{h}{\hat}{\lowerCaseRomanLettersNoMHT}
\texalphabetmacro{h}{\hat}{\lowerCaseGreekLetters}
\texalphabetmacro{h}{\hat}{\upperCaseGreekLettersInLaTeX}

% Bold hatted shortcuts
\newcommand{\boldhat}[1]{\mathbf{\hat{#1}}}
\charalphabetmacro{bh}{\boldhat}{\upperCaseRomanLetters}
\charalphabetmacro{bh}{\boldhat}{\lowerCaseRomanLetters}
\texalphabetmacro{bh}{\boldhat}{\lowerCaseGreekLetters}
\texalphabetmacro{bh}{\boldhat}{\upperCaseGreekLettersInLaTeX}


%Wide hatted shortcuts
\charalphabetmacro{wh}{\widehat}{\upperCaseRomanLetters}
\charalphabetmacro{wh}{\widehat}{\lowerCaseRomanLettersNoMHT}

% Tilde shortcuts 
\charalphabetmacro{td}{\tilde}{\upperCaseRomanLetters}
\charalphabetmacro{td}{\tilde}{\lowerCaseRomanLetters}
\texalphabetmacro{td}{\tilde}{\lowerCaseGreekLetters}
\texalphabetmacro{td}{\tilde}{\upperCaseGreekLettersInLaTeX}

% this had too many exceptions so i went with td instead of t :S

% Bold tilde shortcuts
\newcommand{\boldtilde}[1]{\mathbf{\tilde{#1}}}

\charalphabetmacro{btd}{\boldtilde}{\upperCaseRomanLetters}
\charalphabetmacro{btd}{\boldtilde}{\lowerCaseRomanLetters}
\texalphabetmacro{btd}{\boldtilde}{\lowerCaseGreekLetters}
\texalphabetmacro{btd}{\boldtilde}{\upperCaseGreekLettersInLaTeX}

% bold italics
\def\mathbbi#1{\textbf{\em #1}}
\charalphabetmacro{bi}{\mathbbi}{\upperCaseRomanLetters}
\charalphabetmacro{bi}{\mathbbi}{\lowerCaseRomanLettersNoG}

% bold hatted italics
\newcommand{\boldhatitalic}[1]{\hat{\mathbbi{#1}}}
\charalphabetmacro{bhi}{\boldhatitalic}{\upperCaseRomanLetters}
\charalphabetmacro{bhi}{\boldhatitalic}{\lowerCaseRomanLetters}





